import os

from dotenv import load_dotenv
from google import genai  
from pydantic import BaseModel, Field


load_dotenv()


class AdvertisementCheckMessage(BaseModel):
    answer: bool = Field(..., description="True if the message contains advertisement or spam, False otherwise.")


client = genai.Client(
    api_key=os.environ.get("GEMINI_API_KEY")
)

mess = """
    üè† –ï–¥–∏–Ω—ã–π –ñ–ö–• –ë–æ—Ç ‚Äî –≤–∞—à –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Ü–∏—Ñ—Ä–æ–≤–æ–π –ø–æ–º–æ—â–Ω–∏–∫ –ø–æ –≤—Å–µ–º –≤–æ–ø—Ä–æ—Å–∞–º –∂–∏–ª–∏—â–Ω–æ-–∫–æ–º–º—É–Ω–∞–ª—å–Ω–æ–≥–æ —Ö–æ–∑—è–π—Å—Ç–≤–∞!
    –° –Ω–∏–º –≤—ã —Å–º–æ–∂–µ—Ç–µ:
    ‚úÖ –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å –ø–æ–∫–∞–∑–∞–Ω–∏—è —Å—á—ë—Ç—á–∏–∫–æ–≤ –∑–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥
    üí≥ –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∏ –æ–ø–ª–∞—á–∏–≤–∞—Ç—å —Å—á–µ—Ç–∞ –æ–Ω–ª–∞–π–Ω
    üîß –û—Ñ–æ—Ä–º–ª—è—Ç—å –∑–∞—è–≤–∫–∏ –Ω–∞ —Ä–µ–º–æ–Ω—Ç –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ
    üì¢ –ü–æ–ª—É—á–∞—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç —É–ø—Ä–∞–≤–ª—è—é—â–µ–π –∫–æ–º–ø–∞–Ω–∏–∏
    ‚úâÔ∏è –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –æ–±—Ä–∞—â–µ–Ω–∏—è, –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∏ –∂–∞–ª–æ–±—ã –Ω–∞–ø—Ä—è–º—É—é
    üìä –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é –ø–ª–∞—Ç–µ–∂–µ–π –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å—Ö–æ–¥—ã

    –í—Å–µ —É—Å–ª—É–≥–∏ –ñ–ö–• ‚Äî –≤ –æ–¥–Ω–æ–º —É–¥–æ–±–Ω–æ–º Telegram-–±–æ—Ç–µ!
    üöÄ –ü—Ä–æ—Å—Ç–æ –æ—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞–π–¥–∏—Ç–µ –ü–û–ú–û–©–ù–ò–ö –ñ–ö–•
"""

response = client.models.generate_content(
    model="gemini-2.5-flash",
    contents=f"""
    {mess}

    –ï—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤—ã—à–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–∞–º, —Ä–µ–∫–ª–∞–º—É –∏–ª–∏ –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç, –æ—Ç–≤–µ—Ç—å —Ç–æ–ª—å–∫–æ "True", –µ—Å–ª–∏ –Ω–µ—Ç - "False".
    """,
    config={
        "response_mime_type": "application/json",
        "response_json_schema": AdvertisementCheckMessage.model_json_schema(),
    },
)

print(response.text)

